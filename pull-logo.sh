#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –ª–æ–≥–æ—Ç–∏–ø–∞ —Å Git –Ω–∞ —Å–µ—Ä–≤–µ—Ä

echo "üîÑ –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–∞ –∏–∑ Git..."
echo ""

cd ~/novolunie || exit 1

echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è..."
git status

echo ""
echo "2Ô∏è‚É£ –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ Git..."
git pull origin main

echo ""
echo "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ª–æ–≥–æ—Ç–∏–ø–∞..."
if [ -f "assets/logo.png" ]; then
    echo "‚úÖ –õ–æ–≥–æ—Ç–∏–ø –Ω–∞–π–¥–µ–Ω: assets/logo.png"
    ls -lh assets/logo.png
else
    echo "‚ùå –õ–æ–≥–æ—Ç–∏–ø –ù–ï –Ω–∞–π–¥–µ–Ω!"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ Git"
fi

echo ""
echo "4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞..."
ls -la assets/ 2>/dev/null || echo "‚ö†Ô∏è  –ü–∞–ø–∫–∞ assets –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo ""
echo "–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Nginx (–Ω–µ Docker), —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã:"
echo "  sudo cp -r ~/novolunie/* /var/www/html/"
echo ""
echo "–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker, –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:"
echo "  docker compose down"
echo "  docker compose up -d --build"
